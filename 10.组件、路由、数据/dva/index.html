<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    /* 
                       dva: 不仅仅是一个第三方库，更是一个框架，它主要整合了了redux的相关内容，让开发者处理数据更加容易，实际上，dev依赖了很多第三方库：react、react-router、redux、redux-saga、react-redux、connect-react-router等等。


                dev的使用： 
                   1.dva默认导出一个函数，通过调用该函数，可以得到一个dva对象。 还有导出其他如 connect这些东西等等

                   2.dva对象.router: 路由方法，传入一个函数，该函数返回一个React节点，将来，应该程序启动后，会自动渲染该节点。

                   3.dva对象.start: 该方法用于启动dva应用程序，可以认为启动的就是react程序，该函数传入一个css选择器，用于选中页面中的某个dom元素，react会将内容渲染到该元素内容。

                   4.dva对象.model: 该方法用于定义一个模型，该模型可以理解为redux的action、reducer、redux-saga副作用处理的整合，整合成一个对象，将该对象传入model方法即可。
                      参数对象中的属性: 
                          1. namespace: 命名空间, 字符串， 会被作为仓库中的属性保存
                          2. state: 该模型的默认状态。 仓库中该[namespace]的默认值
                          3. reducers: 该属性配置为一个对象，对象中的每个方法就是一个reducer，dva约定，方法的名字，就是匹配的action类型。所以函数中不用去判断action的type类型。
                          4. effects: 处理副作用，底层是使用redux-saga实现的，该属性配置为一个对象，对象中的每个方法均处理一个副作用，方法的名字，就是匹配的action类型。
                              函数的参数： 1. action、 2. 封装好的saga/effects对象
                          5. subscriptions: 配置为一个对象，该对象中可以写任意数量任意名称的属性，每个属性是一个函数，这些函数会在模型加入到仓库中后立即运行。

                   5.在dva中同步路由到仓库
                          1. 在调用dva函数时，配置history对象
                          2. 使用ConnectedRouter组件时提供路由上下文。传入dva对象中render函数，的回调函数的形参中的history对象,作为属性。

                    dva函数的参数配置对象中的配置：
                          1. history: 同步到仓库的history对象， 后面的ConnectedRouter组件也必须用该对象，不然没法同步。
                          2. initialState: 创建redux仓库时，使用的默认状态。属性名必须与模型中的namespace同名，代表这个模型的默认状态
                          3. onError: 当仓库的运行发生错误的时候，运行该函数
                          4. onAction: 可以配置redux中间件。 值可以为一个中间件对象或一个数组
                          5. onStateChange: 当仓库中的状态变化时运行该函数
                          6. onReducer: 对模型中的reducer的进一步封装
                          7. onEffect: 类似于对于模型中的effect的进一步封装。熟读源码
                          8. extraEnhancers: 它是用于封装createStore函数的，dva会将原来的仓库创建函数作为参数传递，返回一个新的用于创建仓库的函数。extraEnhancers值为数据，数据每一项为函数。
                   
                         
                    触发dispatch时参数对象的type必须带上命名空间。如: 'connect/increase'  让其内部找到对应得了reducer
                      如果是在模型中触发的，就不用带上命名空间，因为内容就是找该模型的reducer
    
    
    
    */
  </script>
</body>
</html>